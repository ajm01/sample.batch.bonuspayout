<server description="PostgreSQL">

<!-- 
    <dataSource id="batchDB" type="javax.sql.XADataSource">
        <jdbcDriver libraryRef="postgresLib"/>
        <properties serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
    </dataSource>
 -->
 
 
    <!--  In this sample we'll use the same database (as the runtime DB) but use a different DS to access it. -->
    <dataSource id="appDB" jndiName="jdbc/batch" type="javax.sql.XADataSource" jdbcDriverRef="postgresql-driver">
        <!-- 
        <properties.postgresql  serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
 -->
        <properties serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
    </dataSource>

    <!--  In this sample we'll use the same database (as the runtime DB) but use a different DS to access it. -->
    <dataSource id="appDBNonJta" jndiName="jdbc/batchNonJta" type="javax.sql.ConnectionPoolDataSource" jdbcDriverRef="postgresql-driver" transactional="false">
        <!-- 
        <properties.postgresql  serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
 -->
        <properties serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
    </dataSource>

    
    <!--  NOT SURE THIS MAKES SENSE YET for PostgreSQL
         Create a non-transactional datasource that can be used with a holdable cursor.  Another option
         would be to remove the attribute:  transactional="false" and have a one-phase-only resource
         that could be used to enlist via a "last participant" optimization -->
    <dataSource id="appReadOnlyDB" jndiName="jdbc/ReadOnlyDS" type="javax.sql.ConnectionPoolDataSource" jdbcDriverRef="postgresql-driver" transactional="false">
        <!--
           <dataSource id="appReadOnlyDB" jndiName="jdbc/ReadOnlyDS">
         -->
        <properties serverName="${POSTGRES_HOSTNAME}" portNumber="${POSTGRES_PORT}" user="test" password="test" databaseName="testdb"/>
        <connectionManager enableSharingForDirectLookups="false"/>
    </dataSource>
    
</server>
